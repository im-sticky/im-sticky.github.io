(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[110],{8110:function(){(()=>{var t={269:t=>{!function(){var e;function r(t,n){var i=this instanceof r?this:e;if(i.reset(n),"string"==typeof t&&t.length>0&&i.hash(t),i!==this)return i}r.prototype.hash=function(t){var e,r,n,i,o;switch(o=t.length,this.len+=o,r=this.k1,n=0,this.rem){case 0:r^=o>n?65535&t.charCodeAt(n++):0;case 1:r^=o>n?(65535&t.charCodeAt(n++))<<8:0;case 2:r^=o>n?(65535&t.charCodeAt(n++))<<16:0;case 3:r^=o>n?(255&t.charCodeAt(n))<<24:0,r^=o>n?(65280&t.charCodeAt(n++))>>8:0}if(this.rem=o+this.rem&3,(o-=this.rem)>0){for(e=this.h1;e=5*(e=(e^=r=13715*(r=(r=11601*r+3432906752*(65535&r)&4294967295)<<15|r>>>17)+461832192*(65535&r)&4294967295)<<13|e>>>19)+3864292196&4294967295,!(n>=o);)r=65535&t.charCodeAt(n++)^(65535&t.charCodeAt(n++))<<8^(65535&t.charCodeAt(n++))<<16,r^=(255&(i=t.charCodeAt(n++)))<<24^(65280&i)>>8;switch(r=0,this.rem){case 3:r^=(65535&t.charCodeAt(n+2))<<16;case 2:r^=(65535&t.charCodeAt(n+1))<<8;case 1:r^=65535&t.charCodeAt(n)}this.h1=e}return this.k1=r,this},r.prototype.result=function(){var t,e;return t=this.k1,e=this.h1,t>0&&(e^=t=13715*(t=(t=11601*t+3432906752*(65535&t)&4294967295)<<15|t>>>17)+461832192*(65535&t)&4294967295),e^=this.len,e=51819*(e^=e>>>16)+2246770688*(65535&e)&4294967295,e=44597*(e^=e>>>13)+3266445312*(65535&e)&4294967295,(e^=e>>>16)>>>0},r.prototype.reset=function(t){return this.h1="number"==typeof t?t:0,this.rem=this.k1=this.len=0,this},e=new r,t.exports=r}()},203:t=>{self,t.exports=(()=>{"use strict";var t={259:(t,e,r)=>{const n=r(849).buildOptions,i={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(t){return t},attrValueProcessor:function(t){return t}},o=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function a(t){this.options=n(t,i,o),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=h),this.options.cdataTagName?this.isCDATA=m:this.isCDATA=function(){return!1},this.replaceCDATAstr=s,this.replaceCDATAarr=c,this.options.format?(this.indentate=d,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=f,this.buildObjNode=u):(this.buildTextNode=p,this.buildObjNode=l),this.buildTextValNode=p,this.buildObjectNode=l}function s(t,e){return t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t?t+"<![CDATA["+e+"]]"+this.tagEndChar:t.replace(this.options.cdataPositionChar,"<![CDATA["+e+"]]"+this.tagEndChar)}function c(t,e){if(t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t)return t+"<![CDATA["+e.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let r in e)t=t.replace(this.options.cdataPositionChar,"<![CDATA["+e[r]+"]]>");return t+this.newLine}function l(t,e,r,n){return r&&!t.includes("<")?this.indentate(n)+"<"+e+r+">"+t+"</"+e+this.tagEndChar:this.indentate(n)+"<"+e+r+this.tagEndChar+t+this.indentate(n)+"</"+e+this.tagEndChar}function u(t,e,r,n){return""!==t?this.buildObjectNode(t,e,r,n):this.indentate(n)+"<"+e+r+"/"+this.tagEndChar}function p(t,e,r,n){return this.indentate(n)+"<"+e+r+">"+this.options.tagValueProcessor(t)+"</"+e+this.tagEndChar}function f(t,e,r,n){return""!==t?this.buildTextValNode(t,e,r,n):this.indentate(n)+"<"+e+r+"/"+this.tagEndChar}function d(t){return this.options.indentBy.repeat(t)}function h(t){return!!t.startsWith(this.options.attributeNamePrefix)&&t.substr(this.attrPrefixLen)}function m(t){return t===this.options.cdataTagName}a.prototype.parse=function(t){return this.j2x(t,0).val},a.prototype.j2x=function(t,e){let r="",n="";const i=Object.keys(t),o=i.length;for(let a=0;a<o;a++){const o=i[a];if(void 0===t[o]);else if(null===t[o])n+=this.indentate(e)+"<"+o+"/"+this.tagEndChar;else if(t[o]instanceof Date)n+=this.buildTextNode(t[o],o,"",e);else if("object"!=typeof t[o]){const i=this.isAttribute(o);i?r+=" "+i+'="'+this.options.attrValueProcessor(""+t[o])+'"':this.isCDATA(o)?t[this.options.textNodeName]?n+=this.replaceCDATAstr(t[this.options.textNodeName],t[o]):n+=this.replaceCDATAstr("",t[o]):o===this.options.textNodeName?t[this.options.cdataTagName]||(n+=this.options.tagValueProcessor(""+t[o])):n+=this.buildTextNode(t[o],o,"",e)}else if(Array.isArray(t[o]))if(this.isCDATA(o))n+=this.indentate(e),t[this.options.textNodeName]?n+=this.replaceCDATAarr(t[this.options.textNodeName],t[o]):n+=this.replaceCDATAarr("",t[o]);else{const r=t[o].length;for(let i=0;i<r;i++){const r=t[o][i];if(void 0===r);else if(null===r)n+=this.indentate(e)+"<"+o+"/"+this.tagEndChar;else if("object"==typeof r){const t=this.j2x(r,e+1);n+=this.buildObjNode(t.val,o,t.attrStr,e)}else n+=this.buildTextNode(r,o,"",e)}}else if(this.options.attrNodeName&&o===this.options.attrNodeName){const e=Object.keys(t[o]),n=e.length;for(let i=0;i<n;i++)r+=" "+e[i]+'="'+this.options.attrValueProcessor(""+t[o][e[i]])+'"'}else{const r=this.j2x(t[o],e+1);n+=this.buildObjNode(r.val,o,r.attrStr,e)}}return{attrStr:r,val:n}},t.exports=a},398:(t,e,r)=>{const n=function(t){return String.fromCharCode(t)},i={nilChar:n(176),missingChar:n(201),nilPremitive:n(175),missingPremitive:n(200),emptyChar:n(178),emptyValue:n(177),boundryChar:n(179),objStart:n(198),arrStart:n(204),arrayEnd:n(185)},o=[i.nilChar,i.nilPremitive,i.missingChar,i.missingPremitive,i.boundryChar,i.emptyChar,i.emptyValue,i.arrayEnd,i.objStart,i.arrStart],a=function(t,e,r){if("string"==typeof e)return t&&t[0]&&void 0!==t[0].val?s(t[0].val,e):s(t,e);{const o=void 0===(n=t)?i.missingChar:null===n?i.nilChar:!(n.child&&0===Object.keys(n.child).length&&(!n.attrsMap||0===Object.keys(n.attrsMap).length))||i.emptyChar;if(!0===o){let n="";if(Array.isArray(e)){n+=i.arrStart;const o=e[0],l=t.length;if("string"==typeof o)for(let e=0;e<l;e++){const r=s(t[e].val,o);n=c(n,r)}else for(let e=0;e<l;e++){const i=a(t[e],o,r);n=c(n,i)}n+=i.arrayEnd}else{n+=i.objStart;const o=Object.keys(e);Array.isArray(t)&&(t=t[0]);for(let i in o){const s=o[i];let l;l=!r.ignoreAttributes&&t.attrsMap&&t.attrsMap[s]?a(t.attrsMap[s],e[s],r):s===r.textNodeName?a(t.val,e[s],r):a(t.child[s],e[s],r),n=c(n,l)}}return n}return o}var n},s=function(t){switch(t){case void 0:return i.missingPremitive;case null:return i.nilPremitive;case"":return i.emptyValue;default:return t}},c=function(t,e){return l(e[0])||l(t[t.length-1])||(t+=i.boundryChar),t+e},l=function(t){return-1!==o.indexOf(t)},u=r(543),p=r(849).buildOptions;e.convert2nimn=function(t,e,r){return r=p(r,u.defaultOptions,u.props),a(t,e,r)}},284:(t,e,r)=>{const n=r(849),i=function(t,e,r){const o={};if((!t.child||n.isEmptyObject(t.child))&&(!t.attrsMap||n.isEmptyObject(t.attrsMap)))return n.isExist(t.val)?t.val:"";if(n.isExist(t.val)&&("string"!=typeof t.val||""!==t.val&&t.val!==e.cdataPositionChar)){const i=n.isTagNameInArrayMode(t.tagname,e.arrayMode,r);o[e.textNodeName]=i?[t.val]:t.val}n.merge(o,t.attrsMap,e.arrayMode);const a=Object.keys(t.child);for(let s=0;s<a.length;s++){const c=a[s];if(t.child[c]&&t.child[c].length>1){o[c]=[];for(let r in t.child[c])t.child[c].hasOwnProperty(r)&&o[c].push(i(t.child[c][r],e,c))}else{const a=i(t.child[c][0],e,c),s=!0===e.arrayMode&&"object"==typeof a||n.isTagNameInArrayMode(c,e.arrayMode,r);o[c]=s?[a]:a}}return o};e.convertToJson=i},702:(t,e,r)=>{const n=r(849),i=r(849).buildOptions,o=r(543),a=function(t,e,r){let i="{";const o=Object.keys(t.child);for(let n=0;n<o.length;n++){var s=o[n];if(t.child[s]&&t.child[s].length>1){for(var c in i+='"'+s+'" : [ ',t.child[s])i+=a(t.child[s][c],e)+" , ";i=i.substr(0,i.length-1)+" ] "}else i+='"'+s+'" : '+a(t.child[s][0],e)+" ,"}return n.merge(i,t.attrsMap),n.isEmptyObject(i)?n.isExist(t.val)?t.val:"":(n.isExist(t.val)&&("string"!=typeof t.val||""!==t.val&&t.val!==e.cdataPositionChar)&&(i+='"'+e.textNodeName+'" : '+(!0!==(l=t.val)&&!1!==l&&isNaN(l)?'"'+l+'"':l)),","===i[i.length-1]&&(i=i.substr(0,i.length-2)),i+"}");var l};e.convertToJsonString=function(t,e){return(e=i(e,o.defaultOptions,o.props)).indentBy=e.indentBy||"",a(t,e,0)}},965:(t,e,r)=>{const n=r(284),i=r(543),o=r(543),a=r(849).buildOptions,s=r(501);e.parse=function(t,e,r){if(r){!0===r&&(r={});const e=s.validate(t,r);if(!0!==e)throw Error(e.err.msg)}e=a(e,o.defaultOptions,o.props);const c=i.getTraversalObj(t,e);return n.convertToJson(c,e)},e.convertTonimn=r(398).convert2nimn,e.getTraversalObj=i.getTraversalObj,e.convertToJson=n.convertToJson,e.convertToJsonString=r(702).convertToJsonString,e.validate=s.validate,e.j2xParser=r(259),e.parseToNimn=function(t,r,n){return e.convertTonimn(e.getTraversalObj(t,n),r,n)}},849:(t,e)=>{const r="[:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",n=new RegExp("^"+r+"$");e.isExist=function(t){return void 0!==t},e.isEmptyObject=function(t){return 0===Object.keys(t).length},e.merge=function(t,e,r){if(e){const n=Object.keys(e),i=n.length;for(let o=0;o<i;o++)t[n[o]]="strict"===r?[e[n[o]]]:e[n[o]]}},e.getValue=function(t){return e.isExist(t)?t:""},e.buildOptions=function(t,e,r){var n={};if(!t)return e;for(let i=0;i<r.length;i++)void 0!==t[r[i]]?n[r[i]]=t[r[i]]:n[r[i]]=e[r[i]];return n},e.isTagNameInArrayMode=function(t,e,r){return!1!==e&&(e instanceof RegExp?e.test(t):"function"==typeof e?!!e(t,r):"strict"===e)},e.isName=function(t){return!(null==n.exec(t))},e.getAllMatches=function(t,e){const r=[];let n=e.exec(t);for(;n;){const i=[],o=n.length;for(let t=0;t<o;t++)i.push(n[t]);r.push(i),n=e.exec(t)}return r},e.nameRegexp=r},501:(t,e,r)=>{const n=r(849),i={allowBooleanAttributes:!1},o=["allowBooleanAttributes"];function a(t,e){for(var r=e;e<t.length;e++)if("?"!=t[e]&&" "!=t[e]);else{var n=t.substr(r,e-r);if(e>5&&"xml"===n)return f("InvalidXml","XML declaration allowed only at the start of the document.",h(t,e));if("?"==t[e]&&">"==t[e+1]){e++;break}}return e}function s(t,e){if(t.length>e+5&&"-"===t[e+1]&&"-"===t[e+2]){for(e+=3;e<t.length;e++)if("-"===t[e]&&"-"===t[e+1]&&">"===t[e+2]){e+=2;break}}else if(t.length>e+8&&"D"===t[e+1]&&"O"===t[e+2]&&"C"===t[e+3]&&"T"===t[e+4]&&"Y"===t[e+5]&&"P"===t[e+6]&&"E"===t[e+7]){let r=1;for(e+=8;e<t.length;e++)if("<"===t[e])r++;else if(">"===t[e]&&(r--,0===r))break}else if(t.length>e+9&&"["===t[e+1]&&"C"===t[e+2]&&"D"===t[e+3]&&"A"===t[e+4]&&"T"===t[e+5]&&"A"===t[e+6]&&"["===t[e+7])for(e+=8;e<t.length;e++)if("]"===t[e]&&"]"===t[e+1]&&">"===t[e+2]){e+=2;break}return e}function c(t,e){let r="",n="",i=!1;for(;e<t.length;e++){if('"'===t[e]||"'"===t[e])if(""===n)n=t[e];else{if(n!==t[e])continue;n=""}else if(">"===t[e]&&""===n){i=!0;break}r+=t[e]}return""===n&&{value:r,index:e,tagClosed:i}}e.validate=function(t,e){e=n.buildOptions(e,i,o);const r=[];let l=!1,d=!1;"\ufeff"===t[0]&&(t=t.substr(1));for(let i=0;i<t.length;i++)if("<"===t[i]&&"?"===t[i+1]){if(i+=2,i=a(t,i),i.err)return i}else{if("<"!==t[i]){if(" "===t[i]||"\t"===t[i]||"\n"===t[i]||"\r"===t[i])continue;return f("InvalidChar","char '"+t[i]+"' is not expected.",h(t,i))}if(i++,"!"===t[i]){i=s(t,i);continue}{let o=!1;"/"===t[i]&&(o=!0,i++);let y="";for(;i<t.length&&">"!==t[i]&&" "!==t[i]&&"\t"!==t[i]&&"\n"!==t[i]&&"\r"!==t[i];i++)y+=t[i];if(y=y.trim(),"/"===y[y.length-1]&&(y=y.substring(0,y.length-1),i--),m=y,!n.isName(m)){let e;return e=0===y.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '"+y+"' is an invalid name.",f("InvalidTag",e,h(t,i))}const b=c(t,i);if(!1===b)return f("InvalidAttr","Attributes for '"+y+"' have open quote.",h(t,i));let v=b.value;if(i=b.index,"/"===v[v.length-1]){v=v.substring(0,v.length-1);const r=u(v,e);if(!0!==r)return f(r.err.code,r.err.msg,h(t,i-v.length+r.err.line));l=!0}else if(o){if(!b.tagClosed)return f("InvalidTag","Closing tag '"+y+"' doesn't have proper closing.",h(t,i));if(v.trim().length>0)return f("InvalidTag","Closing tag '"+y+"' can't have attributes or invalid starting.",h(t,i));{const e=r.pop();if(y!==e)return f("InvalidTag","Closing tag '"+e+"' is expected inplace of '"+y+"'.",h(t,i));0==r.length&&(d=!0)}}else{const n=u(v,e);if(!0!==n)return f(n.err.code,n.err.msg,h(t,i-v.length+n.err.line));if(!0===d)return f("InvalidXml","Multiple possible root nodes found.",h(t,i));r.push(y),l=!0}for(i++;i<t.length;i++)if("<"===t[i]){if("!"===t[i+1]){i++,i=s(t,i);continue}if("?"!==t[i+1])break;if(i=a(t,++i),i.err)return i}else if("&"===t[i]){const e=p(t,i);if(-1==e)return f("InvalidChar","char '&' is not expected.",h(t,i));i=e}"<"===t[i]&&i--}}var m;return l?!(r.length>0)||f("InvalidXml","Invalid '"+JSON.stringify(r,null,4).replace(/\r?\n/g,"")+"' found.",1):f("InvalidXml","Start tag expected.",1)};const l=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function u(t,e){const r=n.getAllMatches(t,l),i={};for(let n=0;n<r.length;n++){if(0===r[n][1].length)return f("InvalidAttr","Attribute '"+r[n][2]+"' has no space in starting.",m(t,r[n][0]));if(void 0===r[n][3]&&!e.allowBooleanAttributes)return f("InvalidAttr","boolean attribute '"+r[n][2]+"' is not allowed.",m(t,r[n][0]));const o=r[n][2];if(!d(o))return f("InvalidAttr","Attribute '"+o+"' is an invalid name.",m(t,r[n][0]));if(i.hasOwnProperty(o))return f("InvalidAttr","Attribute '"+o+"' is repeated.",m(t,r[n][0]));i[o]=1}return!0}function p(t,e){if(";"===t[++e])return-1;if("#"===t[e])return function(t,e){let r=/\d/;for("x"===t[e]&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(";"===t[e])return e;if(!t[e].match(r))break}return-1}(t,++e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(";"===t[e])break;return-1}return e}function f(t,e,r){return{err:{code:t,msg:e,line:r}}}function d(t){return n.isName(t)}function h(t,e){return t.substring(0,e).split(/\r?\n/).length}function m(t,e){return t.indexOf(e)+e.length}},468:t=>{t.exports=function(t,e,r){this.tagname=t,this.parent=e,this.child={},this.attrsMap={},this.val=r,this.addChild=function(t){Array.isArray(this.child[t.tagname])?this.child[t.tagname].push(t):this.child[t.tagname]=[t]}}},543:(t,e,r)=>{const n=r(849),i=r(849).buildOptions,o=r(468);"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,n.nameRegexp),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const a={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(t,e){return t},attrValueProcessor:function(t,e){return t},stopNodes:[]};e.defaultOptions=a;const s=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];function c(t,e,r){return e&&(r.trimValues&&(e=e.trim()),e=u(e=r.tagValueProcessor(e,t),r.parseNodeValue,r.parseTrueNumberOnly)),e}function l(t,e){if(e.ignoreNameSpace){const e=t.split(":"),r="/"===t.charAt(0)?"/":"";if("xmlns"===e[0])return"";2===e.length&&(t=r+e[1])}return t}function u(t,e,r){if(e&&"string"==typeof t){let e;return""===t.trim()||isNaN(t)?e="true"===t||"false"!==t&&t:(-1!==t.indexOf("0x")?e=Number.parseInt(t,16):-1!==t.indexOf(".")?(e=Number.parseFloat(t),t=t.replace(/\.?0+$/,"")):e=Number.parseInt(t,10),r&&(e=String(e)===t?e:t)),e}return n.isExist(t)?t:""}e.props=s;const p=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function f(t,e){if(!e.ignoreAttributes&&"string"==typeof t){t=t.replace(/\r?\n/g," ");const r=n.getAllMatches(t,p),i=r.length,o={};for(let t=0;t<i;t++){const n=l(r[t][1],e);n.length&&(void 0!==r[t][4]?(e.trimValues&&(r[t][4]=r[t][4].trim()),r[t][4]=e.attrValueProcessor(r[t][4],n),o[e.attributeNamePrefix+n]=u(r[t][4],e.parseAttributeValue,e.parseTrueNumberOnly)):e.allowBooleanAttributes&&(o[e.attributeNamePrefix+n]=!0))}if(!Object.keys(o).length)return;if(e.attrNodeName){const t={};return t[e.attrNodeName]=o,t}return o}}function d(t,e){let r,n="";for(let i=e;i<t.length;i++){let e=t[i];if(r)e===r&&(r="");else if('"'===e||"'"===e)r=e;else{if(">"===e)return{data:n,index:i};"\t"===e&&(e=" ")}n+=e}}function h(t,e,r,n){const i=t.indexOf(e,r);if(-1===i)throw new Error(n);return i+e.length-1}e.getTraversalObj=function(t,e){t=t.replace(/\r\n?/g,"\n"),e=i(e,a,s);const r=new o("!xml");let l=r,u="";for(let i=0;i<t.length;i++)if("<"===t[i])if("/"===t[i+1]){const r=h(t,">",i,"Closing Tag is not closed.");let o=t.substring(i+2,r).trim();if(e.ignoreNameSpace){const t=o.indexOf(":");-1!==t&&(o=o.substr(t+1))}l&&(l.val?l.val=n.getValue(l.val)+""+c(o,u,e):l.val=c(o,u,e)),e.stopNodes.length&&e.stopNodes.includes(l.tagname)&&(l.child=[],null==l.attrsMap&&(l.attrsMap={}),l.val=t.substr(l.startIndex+1,i-l.startIndex-1)),l=l.parent,u="",i=r}else if("?"===t[i+1])i=h(t,"?>",i,"Pi Tag is not closed.");else if("!--"===t.substr(i+1,3))i=h(t,"--\x3e",i,"Comment is not closed.");else if("!D"===t.substr(i+1,2)){const e=h(t,">",i,"DOCTYPE is not closed.");i=t.substring(i,e).indexOf("[")>=0?t.indexOf("]>",i)+1:e}else if("!["===t.substr(i+1,2)){const r=h(t,"]]>",i,"CDATA is not closed.")-2,a=t.substring(i+9,r);if(u&&(l.val=n.getValue(l.val)+""+c(l.tagname,u,e),u=""),e.cdataTagName){const t=new o(e.cdataTagName,l,a);l.addChild(t),l.val=n.getValue(l.val)+e.cdataPositionChar,a&&(t.val=a)}else l.val=(l.val||"")+(a||"");i=r+2}else{const r=d(t,i+1);let a=r.data;const s=r.index,p=a.indexOf(" ");let h=a,m=!0;if(-1!==p&&(h=a.substr(0,p).replace(/\s\s*$/,""),a=a.substr(p+1)),e.ignoreNameSpace){const t=h.indexOf(":");-1!==t&&(h=h.substr(t+1),m=h!==r.data.substr(t+1))}if(l&&u&&"!xml"!==l.tagname&&(l.val=n.getValue(l.val)+""+c(l.tagname,u,e)),a.length>0&&a.lastIndexOf("/")===a.length-1){"/"===h[h.length-1]?(h=h.substr(0,h.length-1),a=h):a=a.substr(0,a.length-1);const t=new o(h,l,"");h!==a&&(t.attrsMap=f(a,e)),l.addChild(t)}else{const t=new o(h,l);e.stopNodes.length&&e.stopNodes.includes(t.tagname)&&(t.startIndex=s),h!==a&&m&&(t.attrsMap=f(a,e)),l.addChild(t),l=t}u="",i=s}else u+=t[i];return r}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};return(()=>{r.r(n),r.d(n,{Decklist:()=>b,MTGO:()=>P,autoParse:()=>C});var t=/^\d+/,e=/\d+$/,i=/(\(|\[)(.+)(\)|\])/,o=function(){function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var e="string"==typeof t?this.parseString(t):this.parseObject(t),n=e.amount,i=e.name,o=e.set,a=e.collectors,s=e.mtgoID;this.name=i,this.amount=n,this.set=o,this.collectors=a,this.mtgoID=s}var n;return(n=[{key:"parseString",value:function(r){r.trim();var n=r.replace(t,"").replace(i,"").replace(e,"").trim(),o=r.match(t),a=r.match(i),s=r.match(e);return{name:n,amount:o?parseInt(o):void 0,set:a?a[2]:void 0,collectors:s?parseInt(s):void 0}}},{key:"parseObject",value:function(t){return{name:t.Name,amount:parseInt(t.Quantity),mtgoID:t.CatID}}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(r.prototype,n),r}();function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"valid",!1),a(this,"deck",[]),a(this,"sideboard",[]),a(this,"companion",null),a(this,"commander",null)};function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=/^deck$/i,d=/^sideboard$/i,h=/^commander$/i,m=/^companion$/i,y=/\n/g,b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(i,t);var e,r,n=(e=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=p(e);if(r){var i=p(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return u(this,t)});function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=n.call(this);var r=t.trim().split(y),a=0;try{r.forEach((function(t){if((t=t.trim()).match(h))a=1;else if(t.match(m))a=2;else if(t.match(f))a=3;else{if(0===a&&t.length>0)a=3;else{if(t.match(d)||3===a&&0===t.length)return void(a=4);if(0===t.length)return}switch(a){case 1:e.commander=new o(t);break;case 2:e.companion=new o(t);break;case 3:e.deck.push(new o(t));break;case 4:e.sideboard.push(new o(t))}}})),e.valid=!0}catch(t){e.valid=!1,console.error(t)}return e}return i}(s),v=r(965);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(t,e){if(e&&("object"===g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var O="16777728",P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(i,t);var e,r,n=(e=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=x(e);if(r){var i=x(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return S(this,t)});function i(t){var e,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];w(this,i),e=n.call(this),t=t.trim();var a=v.validate(t);return e.valid=!0===a,e.valid?v.parse(t,{attributeNamePrefix:"",ignoreAttributes:!1}).Deck.Cards.forEach((function(t){t.Annotation===O?e.commander=new o(t):"true"===t.Sideboard?e.sideboard.push(new o(t)):e.deck.push(new o(t))})):r&&console.error(a.err),e}return i}(s);function C(t){var e=new P(t,!1);return e.valid?e:new b(t)}})(),n})()}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,e=(t,e,r=null)=>{for(;e!==r;){const r=e.nextSibling;t.removeChild(e),e=r}},n=`{{lit-${String(Math.random()).slice(2)}}}`,i=`\x3c!--${n}--\x3e`,o=new RegExp(`${n}|${i}`),a="$lit$";class s{constructor(t,e){this.parts=[],this.element=e;const r=[],i=[],s=document.createTreeWalker(e.content,133,null,!1);let l=0,f=-1,d=0;const{strings:h,values:{length:m}}=t;for(;d<m;){const t=s.nextNode();if(null!==t){if(f++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:r}=e;let n=0;for(let t=0;t<r;t++)c(e[t].name,a)&&n++;for(;n-- >0;){const e=h[d],r=p.exec(e)[2],n=r.toLowerCase()+a,i=t.getAttribute(n);t.removeAttribute(n);const s=i.split(o);this.parts.push({type:"attribute",index:f,name:r,strings:s}),d+=s.length-1}}"TEMPLATE"===t.tagName&&(i.push(t),s.currentNode=t.content)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(n)>=0){const n=t.parentNode,i=e.split(o),s=i.length-1;for(let e=0;e<s;e++){let r,o=i[e];if(""===o)r=u();else{const t=p.exec(o);null!==t&&c(t[2],a)&&(o=o.slice(0,t.index)+t[1]+t[2].slice(0,-a.length)+t[3]),r=document.createTextNode(o)}n.insertBefore(r,t),this.parts.push({type:"node",index:++f})}""===i[s]?(n.insertBefore(u(),t),r.push(t)):t.data=i[s],d+=s}}else if(8===t.nodeType)if(t.data===n){const e=t.parentNode;null!==t.previousSibling&&f!==l||(f++,e.insertBefore(u(),t)),l=f,this.parts.push({type:"node",index:f}),null===t.nextSibling?t.data="":(r.push(t),f--),d++}else{let e=-1;for(;-1!==(e=t.data.indexOf(n,e+1));)this.parts.push({type:"node",index:-1}),d++}}else s.currentNode=i.pop()}for(const n of r)n.parentNode.removeChild(n)}}const c=(t,e)=>{const r=t.length-e.length;return r>=0&&t.slice(r)===e},l=t=>-1!==t.index,u=()=>document.createComment(""),p=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function f(t,e){const{element:{content:r},parts:n}=t,i=document.createTreeWalker(r,133,null,!1);let o=h(n),a=n[o],s=-1,c=0;const l=[];let u=null;for(;i.nextNode();){s++;const t=i.currentNode;for(t.previousSibling===u&&(u=null),e.has(t)&&(l.push(t),null===u&&(u=t)),null!==u&&c++;void 0!==a&&a.index===s;)a.index=null!==u?-1:a.index-c,o=h(n,o),a=n[o]}l.forEach((t=>t.parentNode.removeChild(t)))}const d=t=>{let e=11===t.nodeType?0:1;const r=document.createTreeWalker(t,133,null,!1);for(;r.nextNode();)e++;return e},h=(t,e=-1)=>{for(let r=e+1;r<t.length;r++){const e=t[r];if(l(e))return r}return-1},m=new WeakMap,y=t=>"function"==typeof t&&m.has(t),b={},v={};class g{constructor(t,e,r){this.__parts=[],this.template=t,this.processor=e,this.options=r}update(t){let e=0;for(const r of this.__parts)void 0!==r&&r.setValue(t[e]),e++;for(const r of this.__parts)void 0!==r&&r.commit()}_clone(){const e=t?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),r=[],n=this.template.parts,i=document.createTreeWalker(e,133,null,!1);let o,a=0,s=0,c=i.nextNode();for(;a<n.length;)if(o=n[a],l(o)){for(;s<o.index;)s++,"TEMPLATE"===c.nodeName&&(r.push(c),i.currentNode=c.content),null===(c=i.nextNode())&&(i.currentNode=r.pop(),c=i.nextNode());if("node"===o.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(c.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(c,o.name,o.strings,this.options));a++}else this.__parts.push(void 0),a++;return t&&(document.adoptNode(e),customElements.upgrade(e)),e}}const w=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:t=>t}),_=` ${n} `;class S{constructor(t,e,r,n){this.strings=t,this.values=e,this.type=r,this.processor=n}getHTML(){const t=this.strings.length-1;let e="",r=!1;for(let o=0;o<t;o++){const t=this.strings[o],s=t.lastIndexOf("\x3c!--");r=(s>-1||r)&&-1===t.indexOf("--\x3e",s+1);const c=p.exec(t);e+=null===c?t+(r?_:i):t.substr(0,c.index)+c[1]+c[2]+a+c[3]+n}return e+=this.strings[t],e}getTemplateElement(){const t=document.createElement("template");let e=this.getHTML();return void 0!==w&&(e=w.createHTML(e)),t.innerHTML=e,t}}const x=t=>null===t||!("object"==typeof t||"function"==typeof t),O=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]);class P{constructor(t,e,r){this.dirty=!0,this.element=t,this.name=e,this.strings=r,this.parts=[];for(let n=0;n<r.length-1;n++)this.parts[n]=this._createPart()}_createPart(){return new C(this)}_getValue(){const t=this.strings,e=t.length-1,r=this.parts;if(1===e&&""===t[0]&&""===t[1]){const t=r[0].value;if("symbol"==typeof t)return String(t);if("string"==typeof t||!O(t))return t}let n="";for(let i=0;i<e;i++){n+=t[i];const e=r[i];if(void 0!==e){const t=e.value;if(x(t)||!O(t))n+="string"==typeof t?t:String(t);else for(const e of t)n+="string"==typeof e?e:String(e)}}return n+=t[e],n}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class C{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===b||x(t)&&t===this.value||(this.value=t,y(t)||(this.committer.dirty=!0))}commit(){for(;y(this.value);){const t=this.value;this.value=b,t(this)}this.value!==b&&this.committer.commit()}}class k{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(u()),this.endNode=t.appendChild(u())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=u()),t.__insert(this.endNode=u())}insertAfterPart(t){t.__insert(this.startNode=u()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(null===this.startNode.parentNode)return;for(;y(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=b,t(this)}const t=this.__pendingValue;t!==b&&(x(t)?t!==this.value&&this.__commitText(t):t instanceof S?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):O(t)?this.__commitIterable(t):t===v?(this.value=v,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,r="string"==typeof(t=null==t?"":t)?t:String(t);e===this.endNode.previousSibling&&3===e.nodeType?e.data=r:this.__commitNode(document.createTextNode(r)),this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof g&&this.value.template===e)this.value.update(t.values);else{const r=new g(e,t.processor,this.options),n=r._clone();r.update(t.values),this.__commitNode(n),this.value=r}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let r,n=0;for(const i of t)r=e[n],void 0===r&&(r=new k(this.options),e.push(r),0===n?r.appendIntoPart(this):r.insertAfterPart(e[n-1])),r.setValue(i),r.commit(),n++;n<e.length&&(e.length=n,this.clear(r&&r.endNode))}clear(t=this.startNode){e(this.startNode.parentNode,t.nextSibling,this.endNode)}}class E{constructor(t,e,r){if(this.value=void 0,this.__pendingValue=void 0,2!==r.length||""!==r[0]||""!==r[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=r}setValue(t){this.__pendingValue=t}commit(){for(;y(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=b,t(this)}if(this.__pendingValue===b)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=b}}class A extends P{constructor(t,e,r){super(t,e,r),this.single=2===r.length&&""===r[0]&&""===r[1]}_createPart(){return new j(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class j extends C{}let N=!1;(()=>{try{const t={get capture(){return N=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();class T{constructor(t,e,r){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=r,this.__boundHandleEvent=t=>this.handleEvent(t)}setValue(t){this.__pendingValue=t}commit(){for(;y(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=b,t(this)}if(this.__pendingValue===b)return;const t=this.__pendingValue,e=this.value,r=null==t||null!=e&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),n=null!=t&&(null==e||r);r&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),n&&(this.__options=R(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=b}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const R=t=>t&&(N?{capture:t.capture,passive:t.passive,once:t.once}:t.capture);function I(t){let e=D.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},D.set(t.type,e));let r=e.stringsArray.get(t.strings);if(void 0!==r)return r;const i=t.strings.join(n);return r=e.keyString.get(i),void 0===r&&(r=new s(t,t.getTemplateElement()),e.keyString.set(i,r)),e.stringsArray.set(t.strings,r),r}const D=new Map,M=new WeakMap,V=new class{handleAttributeExpressions(t,e,r,n){const i=e[0];return"."===i?new A(t,e.slice(1),r).parts:"@"===i?[new T(t,e.slice(1),n.eventContext)]:"?"===i?[new E(t,e.slice(1),r)]:new P(t,e,r).parts}handleTextExpression(t){return new k(t)}};"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.1");const F=(t,...e)=>new S(t,e,"html",V),B=(t,e)=>`${t}--${e}`;let U=!0;void 0===window.ShadyCSS?U=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),U=!1);const z=t=>e=>{const r=B(e.type,t);let i=D.get(r);void 0===i&&(i={stringsArray:new WeakMap,keyString:new Map},D.set(r,i));let o=i.stringsArray.get(e.strings);if(void 0!==o)return o;const a=e.strings.join(n);if(o=i.keyString.get(a),void 0===o){const r=e.getTemplateElement();U&&window.ShadyCSS.prepareTemplateDom(r,t),o=new s(e,r),i.keyString.set(a,o)}return i.stringsArray.set(e.strings,o),o},L=["html","svg"],X=new Set;window.JSCompiler_renameProperty=(t,e)=>t;const $={toAttribute(t,e){switch(e){case Boolean:return t?"":null;case Object:case Array:return null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){switch(e){case Boolean:return null!==t;case Number:return null===t?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}},q=(t,e)=>e!==t&&(e==e||t==t),Y={attribute:!0,type:String,converter:$,reflect:!1,hasChanged:q};class H extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach(((e,r)=>{const n=this._attributeNameForProperty(r,e);void 0!==n&&(this._attributeToPropertyMap.set(n,r),t.push(n))})),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;void 0!==t&&t.forEach(((t,e)=>this._classProperties.set(e,t)))}}static createProperty(t,e=Y){if(this._ensureClassProperties(),this._classProperties.set(t,e),e.noAccessor||this.prototype.hasOwnProperty(t))return;const r="symbol"==typeof t?Symbol():`__${t}`,n=this.getPropertyDescriptor(t,r,e);void 0!==n&&Object.defineProperty(this.prototype,t,n)}static getPropertyDescriptor(t,e,r){return{get(){return this[e]},set(n){const i=this[t];this[e]=n,this.requestUpdateInternal(t,i,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this._classProperties&&this._classProperties.get(t)||Y}static finalize(){const t=Object.getPrototypeOf(this);if(t.hasOwnProperty("finalized")||t.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const t=this.properties,e=[...Object.getOwnPropertyNames(t),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]];for(const r of e)this.createProperty(r,t[r])}}static _attributeNameForProperty(t,e){const r=e.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof t?t.toLowerCase():void 0}static _valueHasChanged(t,e,r=q){return r(t,e)}static _propertyValueFromAttribute(t,e){const r=e.type,n=e.converter||$,i="function"==typeof n?n:n.fromAttribute;return i?i(t,r):t}static _propertyValueToAttribute(t,e){if(void 0===e.reflect)return;const r=e.type,n=e.converter;return(n&&n.toAttribute||$.toAttribute)(t,r)}initialize(){this._updateState=0,this._updatePromise=new Promise((t=>this._enableUpdatingResolver=t)),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach(((t,e)=>{if(this.hasOwnProperty(e)){const t=this[e];delete this[e],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(e,t)}}))}_applyInstanceProperties(){this._instanceProperties.forEach(((t,e)=>this[e]=t)),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(t,e,r){e!==r&&this._attributeToProperty(t,r)}_propertyToAttribute(t,e,r=Y){const n=this.constructor,i=n._attributeNameForProperty(t,r);if(void 0!==i){const t=n._propertyValueToAttribute(e,r);if(void 0===t)return;this._updateState=8|this._updateState,null==t?this.removeAttribute(i):this.setAttribute(i,t),this._updateState=-9&this._updateState}}_attributeToProperty(t,e){if(8&this._updateState)return;const r=this.constructor,n=r._attributeToPropertyMap.get(t);if(void 0!==n){const t=r.getPropertyOptions(n);this._updateState=16|this._updateState,this[n]=r._propertyValueFromAttribute(e,t),this._updateState=-17&this._updateState}}requestUpdateInternal(t,e,r){let n=!0;if(void 0!==t){const i=this.constructor;r=r||i.getPropertyOptions(t),i._valueHasChanged(this[t],e,r.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,e),!0!==r.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,r))):n=!1}!this._hasRequestedUpdate&&n&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(t,e){return this.requestUpdateInternal(t,e),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(t){}const t=this.performUpdate();return null!=t&&await t,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let t=!1;const e=this._changedProperties;try{t=this.shouldUpdate(e),t?this.update(e):this._markUpdated()}catch(e){throw t=!1,this._markUpdated(),e}t&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(e)),this.updated(e))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach(((t,e)=>this._propertyToAttribute(e,this[e],t))),this._reflectingProperties=void 0),this._markUpdated()}updated(t){}firstUpdated(t){}}H.finalized=!0;const W=Element.prototype;W.msMatchesSelector||W.webkitMatchesSelector;const J=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,K=Symbol();class G{constructor(t,e){if(e!==K)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return void 0===this._styleSheet&&(J?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const Z=(t,...e)=>{const r=e.reduce(((e,r,n)=>e+(t=>{if(t instanceof G)return t.cssText;if("number"==typeof t)return t;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${t}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)})(r)+t[n+1]),t[0]);return new G(r,K)};(window.litElementVersions||(window.litElementVersions=[])).push("2.5.1");const Q={};class tt extends H{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const t=this.getStyles();if(Array.isArray(t)){const e=(t,r)=>t.reduceRight(((t,r)=>Array.isArray(r)?e(r,t):(t.add(r),t)),r),r=e(t,new Set),n=[];r.forEach((t=>n.unshift(t))),this._styles=n}else this._styles=void 0===t?[]:[t];this._styles=this._styles.map((t=>{if(t instanceof CSSStyleSheet&&!J){const e=Array.prototype.slice.call(t.cssRules).reduce(((t,e)=>t+e.cssText),"");return new G(String(e),K)}return t}))}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow(this.constructor.shadowRootOptions)}adoptStyles(){const t=this.constructor._styles;0!==t.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?J?this.renderRoot.adoptedStyleSheets=t.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map((t=>t.cssText)),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(t){const e=this.render();super.update(t),e!==Q&&this.constructor.render(e,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach((t=>{const e=document.createElement("style");e.textContent=t.cssText,this.renderRoot.appendChild(e)})))}render(){return Q}}function et(t){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var rt,nt;function it(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function at(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function st(t,e){return(st=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ct(t,e){return!e||"object"!==et(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lt(t){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}tt.finalized=!0,tt.render=(t,r,n)=>{if(!n||"object"!=typeof n||!n.scopeName)throw new Error("The `scopeName` option is required.");const i=n.scopeName,o=M.has(r),a=U&&11===r.nodeType&&!!r.host,s=a&&!X.has(i),c=s?document.createDocumentFragment():r;if(((t,r,n)=>{let i=M.get(r);void 0===i&&(e(r,r.firstChild),M.set(r,i=new k(Object.assign({templateFactory:I},n))),i.appendInto(r)),i.setValue(t),i.commit()})(t,c,Object.assign({templateFactory:z(i)},n)),s){const t=M.get(c);M.delete(c),((t,e,r)=>{X.add(t);const n=r?r.element:document.createElement("template"),i=e.querySelectorAll("style"),{length:o}=i;if(0===o)return void window.ShadyCSS.prepareTemplateStyles(n,t);const a=document.createElement("style");for(let l=0;l<o;l++){const t=i[l];t.parentNode.removeChild(t),a.textContent+=t.textContent}(t=>{L.forEach((e=>{const r=D.get(B(e,t));void 0!==r&&r.keyString.forEach((t=>{const{element:{content:e}}=t,r=new Set;Array.from(e.querySelectorAll("style")).forEach((t=>{r.add(t)})),f(t,r)}))}))})(t);const s=n.content;r?function(t,e,r=null){const{element:{content:n},parts:i}=t;if(null==r)return void n.appendChild(e);const o=document.createTreeWalker(n,133,null,!1);let a=h(i),s=0,c=-1;for(;o.nextNode();)for(c++,o.currentNode===r&&(s=d(e),r.parentNode.insertBefore(e,r));-1!==a&&i[a].index===c;){if(s>0){for(;-1!==a;)i[a].index+=s,a=h(i,a);return}a=h(i,a)}}(r,a,s.firstChild):s.insertBefore(a,s.firstChild),window.ShadyCSS.prepareTemplateStyles(n,t);const c=s.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==c)e.insertBefore(c.cloneNode(!0),e.firstChild);else if(r){s.insertBefore(a,s.firstChild);const t=new Set;t.add(a),f(r,t)}})(i,c,t.value instanceof g?t.value.template:void 0),e(r,r.firstChild),r.appendChild(c),M.set(r,t)}!o&&a&&window.ShadyCSS.styleElement(r.host)},tt.shadowRootOptions={mode:"open"};var ut=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&st(t,e)}(s,t);var e,r,n,i,o,a=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=lt(i);if(o){var r=lt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return ct(this,t)});function s(){return ot(this,s),a.apply(this,arguments)}return e=s,n=[{key:"styles",get:function(){return Z(nt||(nt=it(["[part=loader]{display:inline-flex;align-items:center;position:relative;width:80px;height:80px}[part=loader-item]{position:absolute;width:13px;height:13px;border-radius:50%;background:#551a8b;animation-timing-function:cubic-bezier(0,1,1,0)}[part=loader-item]:nth-child(1){left:8px;animation:lds-ellipsis1 .6s infinite}[part=loader-item]:nth-child(2){left:8px;animation:lds-ellipsis2 .6s infinite}[part=loader-item]:nth-child(3){left:32px;animation:lds-ellipsis2 .6s infinite}[part=loader-item]:nth-child(4){left:56px;animation:lds-ellipsis3 .6s infinite}@keyframes lds-ellipsis1{0%{transform:scale(0)}100%{transform:scale(1)}}@keyframes lds-ellipsis3{0%{transform:scale(1)}100%{transform:scale(0)}}@keyframes lds-ellipsis2{0%{transform:translate(0,0)}100%{transform:translate(24px,0)}}"])))}}],(r=[{key:"render",value:function(){return F(rt||(rt=it([' <div part="loader"> <div part="loader-item"></div> <div part="loader-item"></div> <div part="loader-item"></div> <div part="loader-item"></div> </div> '])))}}])&&at(e.prototype,r),n&&at(e,n),s}(tt);class pt{constructor(t){this.classes=new Set,this.changed=!1,this.element=t;const e=(t.getAttribute("class")||"").split(/\s+/);for(const r of e)this.classes.add(r)}add(t){this.classes.add(t),this.changed=!0}remove(t){this.classes.delete(t),this.changed=!0}commit(){if(this.changed){let t="";this.classes.forEach((e=>t+=e+" ")),this.element.setAttribute("class",t)}}}const ft=new WeakMap,dt=(ht=t=>e=>{if(!(e instanceof C)||e instanceof j||"class"!==e.committer.name||e.committer.parts.length>1)throw new Error("The `classMap` directive must be used in the `class` attribute and must be the only part in the attribute.");const{committer:r}=e,{element:n}=r;let i=ft.get(e);void 0===i&&(n.setAttribute("class",r.strings.join(" ")),ft.set(e,i=new Set));const o=n.classList||new pt(n);i.forEach((e=>{e in t||(o.remove(e),i.delete(e))}));for(const a in t){const e=t[a];e!=i.has(a)&&(e?(o.add(a),i.add(a)):(o.remove(a),i.delete(a)))}"function"==typeof o.commit&&o.commit()},(...t)=>{const e=ht(...t);return m.set(e,!0),e});var ht,mt=["transform","modal_dfc","meld","double_faced_token","art_series","double_sided"],yt="Instant",bt="Sorcery",vt="Artifact",gt="Creature",wt="Enchantment",_t="Land",St="Planeswalker",xt=[gt,St,bt,yt,vt,wt,_t],Ot=[St,gt,_t,bt,yt,vt,wt],Pt=["DAR"],Ct="arena",kt="mtgo",Et=222,At=310;function jt(t){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nt(t,e){return(Nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Tt(t,e){return!e||"object"!==jt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function It(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t,e){return{type:t,value:e}};return[t,e.bind(null,t)]}var Dt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nt(t,e)}(o,t);var e,r,n,i=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Rt(r);if(n){var i=Rt(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Tt(this,t)});function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this)).dispatch=function(e,r){t.state=t.reducer(t.state,e),t.requestUpdate().then((function(t){t&&r&&"function"==typeof r&&r()}))},t}return(e=[{key:"apiRoot",get:function(){return"https://api.scryfall.com/"}},{key:"isMobile",get:function(){return window.innerWidth<768}},{key:"createReducer",value:function(t,e){this.state=t,this.reducer=function(r,n){return r=r||t,Object.prototype.hasOwnProperty.call(e,n.type)?e[n.type](r,n):r}}},{key:"emitEvent",value:function(t,e){this.dispatchEvent(new Event(t,Object.assign({bubbles:!0,composed:!0},e)))}},{key:"render",value:function(){throw new Error("NotImplementedError")}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(o.prototype,e),o}(tt),Mt=r(269),Vt=r.n(Mt);var Ft=new Map,Bt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return e=[{key:"set",value:function(t,e){Ft.set(t,e)}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Ft.get(t);return e?Object.assign(Object.create(Object.getPrototypeOf(r)),r):r}},{key:"has",value:function(t){return Ft.has(t)}},{key:"createKey",value:function(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Vt()(t.toLowerCase()).hash(null!==(e=null==n?void 0:n.toLowerCase())&&void 0!==e?e:"").hash(null!==(r=null==i?void 0:i.toString())&&void 0!==r?r:"").result()}}],e&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(t,e),t}();var Ut=function(){function t(e){var r=e.fuzzy,n=e.set,i=e.collector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fuzzy=r,this.set=n,this.collector=i}var e;return(e=[{key:"cacheKey",get:function(){return Bt.createKey(this.fuzzy,this.set,this.collector)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(t.prototype,e),t}();function zt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Lt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zt(Object(r),!0).forEach((function(e){Xt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Xt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Yt(t,e,r){return e&&qt(t.prototype,e),r&&qt(t,r),t}var Ht=function(){function t(e){var r=e.name,n=e.faces,i=void 0===n?[]:n,o=e.url,a=e.usd,s=e.tix,c=e.eur,l=e.amount,u=void 0===l?1:l;$t(this,t),this.name=r,this.faces=i,this.url=o,this.amount=u,this.usd=new Wt(Lt({},a)),this.tix=new Wt(Lt({},s)),this.eur=new Wt(Lt({},c))}return Yt(t,[{key:"prices",get:function(){return[this.usd,this.eur,this.tix]}},{key:"type",get:function(){return this.faces[0].type}},{key:"frontFace",get:function(){return this.faces[0].image}}],[{key:"fromApi",value:function(t){var e,r,n,i,o,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new this({name:t.name,url:t.scryfall_uri,amount:s,faces:mt.includes(t.layout)?t.card_faces.map((function(t){return Jt.fromApi(t)})):[Jt.fromApi(t)],usd:{price:null===(e=t.prices)||void 0===e?void 0:e.usd,url:null===(r=t.purchase_uris)||void 0===r?void 0:r.tcgplayer,symbol:"$"},eur:{price:null===(n=t.prices)||void 0===n?void 0:n.eur,url:null===(i=t.purchase_uris)||void 0===i?void 0:i.cardmarket,symbol:"\u20ac"},tix:{price:null===(o=t.prices)||void 0===o?void 0:o.tix,url:null===(a=t.purchase_uris)||void 0===a?void 0:a.cardhoarder,symbol:"TIX "}})}}]),t}(),Wt=function t(e){var r=e.price,n=e.url,i=e.symbol;$t(this,t),this.price=r,this.url=n,this.symbol=i},Jt=function(){function t(e){var r=e.name,n=e.image,i=e.type;$t(this,t),this.name=r,this.image=n,this.type=i}return Yt(t,null,[{key:"fromApi",value:function(t){return new this({name:t.name,image:t.image_uris.normal,type:t.type_line})}}]),t}();function Kt(t){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Zt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Gt(Object(r),!0).forEach((function(e){Qt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Qt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function te(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ee(t,e){return(ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function re(t,e){return!e||"object"!==Kt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ne(t){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ie(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return oe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oe(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ae,se,ce,le,ue,pe=ie(It("SET_CARD_INFO"),2),fe=pe[0],de=pe[1],he=ie(It("SET_FETCHED"),2),me=he[0],ye=he[1],be=ie(It("UPDATE_SEARCH"),2),ve=be[0],ge=be[1],we=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ee(t,e)}(s,t);var e,r,n,i,o,a=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ne(i);if(o){var r=ne(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return re(this,t)});function s(t,e){var r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);var i=(n=a.call(this)).getAttribute("name")||n.textContent,o=Object.assign({fetched:!1,cardInfo:new Ht({url:'https://scryfall.com/search?q="'.concat(encodeURIComponent(i),'"')}),search:new Ut({fuzzy:i,set:n.getAttribute("set"),collector:n.getAttribute("collector")})},t),c=Object.assign((Qt(r={},fe,(function(t,e){return Zt(Zt({},t),{},{cardInfo:new Ht(Zt({},e.value))})})),Qt(r,me,(function(t){return Zt(Zt({},t),{},{fetched:!0})})),Qt(r,ve,(function(t,e){return Zt(Zt({},t),{},{search:new Ut(Zt({},e.value)),fetched:!1})})),r),e);return n.createReducer(o,c),n}return e=s,n=[{key:"properties",get:function(){return{name:{type:String},set:{type:String},collector:{type:Number},face:{type:Number},priceInfo:{type:Boolean,attribute:"price-info"}}}}],(r=[{key:"name",set:function(t){t!==this.state.search.fuzzy&&this.dispatch(ge(Zt(Zt({},this.state.search),{},{fuzzy:t})))}},{key:"set",set:function(t){t!==this.state.search.set&&this.dispatch(ge(Zt(Zt({},this.state.search),{},{set:t})))}},{key:"collector",set:function(t){t!==this.state.search.collector&&this.dispatch(ge(Zt(Zt({},this.state.search),{},{collector:t})))}},{key:"displayFaces",get:function(){return this.face?this.state.cardInfo.faces.slice(this.face-1,this.face):this.state.cardInfo.faces}},{key:"fetchCard",value:function(){var t=this;if(!this.state.fetched){if(Bt.has(this.state.search.cacheKey)){var e=Bt.get(this.state.search.cacheKey);this.dispatch(de(e))}else{var r="cards/";if(this.state.search.set&&this.state.search.collector)r+="".concat(this.state.search.set,"/").concat(this.state.search.collector);else{var n=new URLSearchParams;Object.keys(this.state.search).forEach((function(e){t.state.search[e]&&n.set(e,t.state.search[e])})),r+="named?".concat(n.toString())}fetch("".concat(this.apiRoot).concat(r)).then((function(t){return t.json()})).then((function(e){if(404===e.status)return console.error(e.details),void t.emitEvent("fetchError");var r=Ht.fromApi(e);Bt.set(t.state.search.cacheKey,r),t.dispatch(de(r)),t.emitEvent("fetchCard")}))}this.dispatch(ye())}}},{key:"render",value:function(){throw new Error("NotImplementedError")}}])&&te(e.prototype,r),n&&te(e,n),s}(Dt);function _e(t){return"touch"===t.pointerType||t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents}function Se(t){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xe(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function Oe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Pe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Oe(Object(r),!0).forEach((function(e){Ce(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ce(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ke(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ee(t,e){return(Ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ae(t,e){return!e||"object"!==Se(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function je(t){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ne(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Te(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Te(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Re,Ie,De,Me,Ve,Fe,Be,Ue,ze=Ne(It("UPDATE_DISPLAY"),2),Le=ze[0],Xe=ze[1],$e=Ne(It("HIDE_CARD"),2),qe=$e[0],Ye=$e[1],He=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ee(t,e)}(s,t);var e,r,n,i,o,a=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=je(i);if(o){var r=je(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return Ae(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),a.call(this,{display:!1,cardX:0,cardY:0,bottom:!0,right:!0},(Ce(t={},Le,(function(t,e){return Pe(Pe({},t),{},{display:e.value.display,cardX:e.value.cardX,cardY:e.value.cardY,bottom:e.value.bottom,right:e.value.right})})),Ce(t,qe,(function(t){return Pe(Pe({},t),{},{display:!1})})),t))}return e=s,n=[{key:"styles",get:function(){return Z(ue||(ue=xe(["@keyframes fadein{from{opacity:0}to{opacity:1}}[part=link]{position:relative}.card-link__container{z-index:99;position:fixed;width:","px;height:","px;display:none}.card-link__container--open{display:flex;flex-wrap:wrap;animation:fadein 83ms ease-out}.card-link__container--bottom{transform:translateY(-1px)}.card-link__container--top{transform:translateY(-100%)}.card-link__container--left{transform:translateX(-100%)}.card-link__container--top.card-link__container--left{transform:translate3d(-100%,-100%,0)}.card-link__container--bottom.card-link__container--left{transform:translate3d(-100%,-1px,0)}.card-link__container--wide{width:","px}[part=image]{display:block;max-width:100%;height:100%;border-radius:","px}.card-link__container--wide [part=image]{width:50%}[part=price-list]{margin:0;padding:0;list-style:none;display:flex;width:100%;background:#fff}[part=price-item]{width:100%;text-align:center}[part=price-item]:first-child{text-align:right}[part=price-item]:last-child{text-align:left}[part=price-link]{display:block;padding:6px 8px;font-size:80%;text-decoration:none}[part=price-link]:hover{text-decoration:underline}@media screen and (max-width:","px){.card-link__container{width:","px;height:","px}.card-link__container--wide{width:","px}[part=image]{border-radius:","px}}"])),Et,At,444,9,767,177.60000000000002,248,355.20000000000005,7)}}],(r=[{key:"displayCard",value:function(t,e){var r=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.dispatch(Xe({display:!0,cardX:t,cardY:e,bottom:n,right:i}),(function(){return r.emitEvent("displayCard")}))}},{key:"hideCard",value:function(){var t=this;this.dispatch(Ye(),(function(){return t.emitEvent("hideCard")}))}},{key:"getCardPositions",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=8,i=window.getComputedStyle(this.shadowRoot.querySelector(".card-link__container")),o=i.getPropertyValue("height"),a=t.clientX>window.innerWidth/2,s=t.clientY+parseInt(o)+this.offsetHeight>window.innerHeight,c=t.clientX+(a?n:-n);return Array.prototype.slice.call(this.getClientRects()).some((function(n){if(t.clientY>=Math.round(n.top)&&t.clientY<=Math.round(n.bottom)&&t.clientX>=Math.round(n.left)&&t.clientX<=Math.round(n.right)){if(e=n.top+(s?0:n.height),r&&"function"==typeof r){var i=r(n,{clientX:c,clientY:e,overflowBottom:s,overflowRight:a});c=i.clientX,e=i.clientY}return!0}})),{clientX:c,clientY:e,overflowBottom:s,overflowRight:a}}},{key:"displayCardEvent",value:function(t){if(_e(t))t.preventDefault();else{var e=this.getCardPositions(t);this.fetchCard(),this.displayCard(e.clientX,e.clientY,!e.overflowBottom,!e.overflowRight)}}},{key:"hideCardEvent",value:function(){this.hideCard()}},{key:"handleMobileTouch",value:function(t){if(_e(t))if(this.emitEvent("touchCard"),this.state.display)this.hideCard();else{t.preventDefault();var e=this.getCardPositions(t,(function(t,e){var r=e.clientY;return{clientX:e.overflowRight?t.right:t.left,clientY:r}}));this.fetchCard(),this.displayCard(e.clientX,e.clientY,!e.overflowBottom,!e.overflowRight)}}},{key:"onTabFocusIn",value:function(t){if(!_e(t)&&"Tab"===t.code){var e=this.getBoundingClientRect(),r=e.left+Et>=window.innerWidth,n=e.bottom+At>=window.innerHeight,i=r?e.right:e.left,o=n?e.top:e.bottom;this.fetchCard(),this.displayCard(i,o,!n,!r)}}},{key:"render",value:function(){var t=dt({"card-link__container":!0,"card-link__container--open":this.state.display&&!!this.displayFaces.length,"card-link__container--bottom":this.state.bottom,"card-link__container--top":!this.state.bottom,"card-link__container--left":!this.state.right,"card-link__container--wide":this.displayFaces.length>1});return F(ae||(ae=xe([' <a href="','" target="_blank" rel="nofollow noreferrer noopener" part="link" @mouseenter="','" @mouseleave="','" @click="','" @keyup="','" @focusout="','"> <slot></slot> <div class="','" part="container" style="left:',"px;top:",'px"> '," "," </div> </a> "])),this.state.cardInfo.url,this.displayCardEvent,this.hideCardEvent,this.handleMobileTouch,this.onTabFocusIn,this.hideCardEvent,t,this.state.cardX,this.state.cardY,this.displayFaces.map((function(t){return F(se||(se=xe(['<img part="image" src="','" alt="','">'])),t.image,t.name)})),this.priceInfo?F(ce||(ce=xe([' <ul part="price-list"> '," </ul>"])),this.state.cardInfo.prices.map((function(t){return t.price?F(le||(le=xe([' <li part="price-item"> <a part="price-link" href="','" target="_blank" rel="nofollow noreferrer noopener"> ',""," </a> </li>"])),t.url,t.symbol,t.price):null}))):null)}}])&&ke(e.prototype,r),n&&ke(e,n),s}(we);function We(t){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Je(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function Ke(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ge(t,e){return(Ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ze(t,e){return!e||"object"!==We(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qe(t){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ge(t,e)}(s,t);var e,r,n,i,o,a=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Qe(i);if(o){var r=Qe(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return Ze(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this)).static=!1,t.fetchCard(),t}return e=s,n=[{key:"properties",get:function(){return{static:{type:Boolean}}}},{key:"styles",get:function(){return Z(Ue||(Ue=Je(["@keyframes fadein{from{opacity:0}to{opacity:1}}[part=container]{display:inline-flex;flex-wrap:wrap;width:","px;height:","px;max-width:100%}[part=container].wide{width:","px}[part=image]{display:block;max-width:100%;height:100%;border-radius:","px;animation:fadein 83ms ease-out}[part=container].wide [part=image]{width:50%}[part=price-list]{margin:0;padding:0;list-style:none;display:flex;width:100%;background:#fff}[part=price-item]{width:100%;text-align:center}[part=price-item]:first-child{text-align:right}[part=price-item]:last-child{text-align:left}[part=price-link]{display:block;padding:6px 8px;font-size:80%;text-decoration:none}[part=price-link]:hover{text-decoration:underline}"])),Et,At,444,9)}}],(r=[{key:"render",value:function(){var t=F(Re||(Re=Je([" "," "," "])),this.displayFaces.map((function(t){return F(Ie||(Ie=Je(['<img part="image" src="','" alt="','">'])),t.image,t.name)})),this.priceInfo?F(De||(De=Je([' <ul part="price-list"> '," </ul>"])),this.state.cardInfo.prices.map((function(t){return t.price?F(Me||(Me=Je([' <li part="price-item"> <a part="price-link" href="','" target="_blank" rel="nofollow noreferrer noopener"> ',""," </a> </li>"])),t.url,t.symbol,t.price):null}))):null);return F(Ve||(Ve=Je([" "," "])),this.static?F(Fe||(Fe=Je(['<div class="','" part="container"> '," </div>"])),dt({wide:this.displayFaces.length>1}),t):F(Be||(Be=Je(['<a class="','" part="container" href="','" target="_blank" rel="nofollow noreferrer noopener"> '," </a>"])),dt({wide:this.displayFaces.length>1}),this.state.cardInfo.url,t))}}])&&Ke(e.prototype,r),n&&Ke(e,n),s}(we),er=r(203);function rr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ir(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var or,ar,sr,cr,lr,ur,pr,fr,dr,hr,mr,yr,br,vr=function(){function t(e){var r=e.instant,n=e.sorcery,i=e.artifact,o=e.creature,a=e.enchantment,s=e.land,c=e.planeswalker,l=e.commander,u=e.companion,p=e.sideboard;nr(this,t),this.instant=this.toSection(yt,r),this.sorcery=this.toSection(bt,n),this.artifact=this.toSection(vt,i),this.creature=this.toSection(gt,o),this.enchantment=this.toSection(wt,a),this.land=this.toSection(_t,s),this.planeswalker=this.toSection(St,c),this.companion=this.toSection("Companion",u),this.commander=this.toSection("Commander",l),this.sideboard=this.toSection("Sideboard",p)}var e,r,n;return e=t,n=[{key:"fromApi",value:function(t,e){var r,n=(rr(r={},gt,[]),rr(r,St,[]),rr(r,yt,[]),rr(r,bt,[]),rr(r,vt,[]),rr(r,wt,[]),rr(r,_t,[]),r),i=function(e){var r=Bt.createKey(e.name,e.set,e.collectors);if(Bt.has(r)){var n=Bt.get(r,!0);return n.amount=e.amount,n}var i=Ht.fromApi(t.find((function(t){return t.name.match(new RegExp("^".concat(e.name),"i"))})),e.amount);return Bt.set(r,i),i};e.deck.forEach((function(e){var r,i=Bt.createKey(e.name,e.set,e.collectors);Bt.has(i)&&(r=Bt.get(i,!0));var o=t.find((function(t){return t.name.match(new RegExp("^".concat(e.name),"i"))}));(o||r)&&Ot.some((function(t){if((r?r.type:mt.includes(o.layout)?o.card_faces[0].type_line:o.type_line).match(new RegExp(t,"i"))){if(r)return r.amount=e.amount,n[t].push(r),!0;var a=Ht.fromApi(o,e.amount);return n[t].push(a),Bt.set(i,a),!0}}))}));var o=e.sideboard.map((function(t){return i(t)})),a=e.commander?i(e.commander):null,s=e.companion?i(e.companion):null;return new this({instant:n.Instant.length?n.Instant:null,sorcery:n.Sorcery.length?n.Sorcery:null,artifact:n.Artifact.length?n.Artifact:null,creature:n.Creature.length?n.Creature:null,enchantment:n.Enchantment.length?n.Enchantment:null,land:n.Land.length?n.Land:null,planeswalker:n.Planeswalker.length?n.Planeswalker:null,sideboard:o.length?o:null,commander:a,companion:s})}}],(r=[{key:"toSection",value:function(t,e){return e?new gr({title:t,cards:e}):void 0}}])&&ir(e.prototype,r),n&&ir(e,n),t}(),gr=function t(e){var r=e.title,n=e.cards;nr(this,t),this.title=r,this.cards=Array.isArray(n)?n.sort((function(t,e){return t.name>e.name?1:-1})):[n]};function wr(t){return(wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _r(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function Sr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function xr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Sr(Object(r),!0).forEach((function(e){Or(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Or(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Cr(t,e){return(Cr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kr(t,e){return!e||"object"!==wr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Er(t){return(Er=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ar(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(t,e)||jr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jr(t,e){if(t){if("string"==typeof t)return Nr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nr(t,e):void 0}}function Nr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Tr=Ar(It("SET_DECKLIST",(function(t,e,r){return{type:t,scryfall:e,parser:r}})),2),Rr=Tr[0],Ir=Tr[1],Dr=Ar(It("SET_SOURCE"),2),Mr=Dr[0],Vr=Dr[1],Fr=Ar(It("SET_FETCHED"),2),Br=Fr[0],Ur=Fr[1],zr=Ar(It("SET_PREVIEW"),2),Lr=zr[0],Xr=zr[1],$r=Ar(It("SET_EXPORT_NOTIFICATION"),2),qr=$r[0],Yr=$r[1],Hr=Ar(It("FLIP_PREVIEW"),2),Wr=Hr[0],Jr=Hr[1],Kr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cr(t,e)}(s,t);var e,r,n,i,o,a=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Er(i);if(o){var r=Er(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return kr(this,t)});function s(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=a.call(this)).hidePreview=!1,e.hideExport=!1,e.inlineSideboard=!1;var r=(Or(t={},Rr,(function(t,r){return xr(xr({},t),{},{decklist:vr.fromApi(r.scryfall,r.parser),parsedList:e.hideExport?void 0:r.parser})})),Or(t,Mr,(function(t,e){return xr(xr({},t),{},{source:e.value})})),Or(t,Br,(function(t,e){return xr(xr({},t),{},{fetched:e.value})})),Or(t,Lr,(function(t,e){return xr(xr({},t),{},{preview:e.value,flipPreview:!1})})),Or(t,qr,(function(t,e){return xr(xr({},t),{},{exportNotification:e.value})})),Or(t,Wr,(function(t){return xr(xr({},t),{},{flipPreview:!t.flipPreview})})),t);return e.createReducer({decklist:void 0,parsedList:void 0,source:void 0,fetched:!1,preview:void 0,exportNotification:void 0},r),e.fetchCards(e.textContent),e}return e=s,n=[{key:"properties",get:function(){return{hidePreview:{type:Boolean,attribute:"hide-preview"},hideExport:{type:Boolean,attribute:"hide-export"},heading:{type:String},inlineSideboard:{type:Boolean,attribute:"inline-sideboard"},src:{type:String}}}},{key:"styles",get:function(){return Z(br||(br=_r(["@keyframes fadein{from{opacity:0}to{opacity:1}}@keyframes fadeout{from{opacity:1}to{opacity:0}}seer-loader{display:block}[part=container]{animation:fadein 83ms ease-out;max-width:840px}[part=header]{display:flex;align-items:flex-start;margin-bottom:1rem}[part=heading]{margin:0;padding-right:1rem}.button{display:inline-block;border:none;padding:.5rem 1rem;background:#551a8b;color:#fff;font-size:.875rem;cursor:pointer;border-radius:3px;appearance:none;transition:background 166ms ease-out}.button--small{padding:.4rem .8rem;font-size:.75rem}.button:focus,.button:hover{background:#343242}[part=export]+[part=export]{margin-left:.5rem}[part=export]:first-of-type{margin-left:auto}[part=export-notification]{color:#75986e;font-size:.875rem;margin:0 0 0 auto;padding:8px 0;font-style:italic;animation:fadein 83ms cubic-bezier(.25,1,.5,1),fadeout ","ms linear ","ms}[part=export-notification]+[part=export]{margin-left:1rem}[part=body]{column-count:3}[part=preview-container]{position:relative;perspective:1200px;width:","px;height:","px}[part=preview]{width:100%;height:100%;background-image:url(https://gatherer.wizards.com/Handlers/Image.ashx?multiverseid=0&type=card);background-size:100% auto;background-repeat:no-repeat;position:relative;transition:transform 560ms ease-in-out;transform-style:preserve-3d;border-radius:","px}[part=preview].flipped{transform:rotateY(180deg)}[part=preview-image]{max-width:100%;position:absolute;backface-visibility:hidden;-webkit-backface-visibility:hidden}[part=preview-image]:first-child{border-radius:","px}[part=preview-image]+[part=preview-image]{transform:rotateY(180deg)}[part=flip-preview]{position:absolute;z-index:10;bottom:1px;left:50%;transform:translateX(-50%)}[part=section]{padding:.5rem;margin:0;line-height:1.5}[part=section]:not(.section--sideboard){page-break-inside:avoid;break-inside:avoid-column;display:table}.section--sideboard [part=section-title]{padding:0 .5rem;column-span:all}[part=section-title]{font-weight:700;margin-bottom:.25rem}[part=section-item]{margin:0}[part=separator]{column-span:all;border-top:1px solid #551a8b}@media screen and (max-width:","px){[part=body]{column-count:2}}@media screen and (max-width:540px){[part=body]{column-count:1}[part=preview]{margin:0 auto}}"])),1500,1500,Et,At,9,9,767)}}],(r=[{key:"src",set:function(t){t!==this.state.source&&this.fetchExternalList(t)}},{key:"fetchExternalList",value:function(t){var e=this;fetch(t).then((function(t){if(200===t.status)return t.text()})).then((function(r){r&&e.dispatch(Vr(t),(function(){return e.fetchCards(r)}))}))}},{key:"fetchCards",value:function(t){var e,r=this,n=t.trim()?(0,er.autoParse)(t):void 0;if(null!=n&&n.deck.length){var i=n.deck.concat(n.sideboard,n.commander,n.companion).filter((function(t){return!!t}));i=(e=new Map(i.map((function(t){return[t.name,t]}))).values(),function(t){if(Array.isArray(t))return Nr(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||jr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter((function(t){return!Bt.has(Bt.createKey(t.name,t.set,t.collectors))}));for(var o=Math.ceil(i.length/75),a=[],s=0;s<o;s++)a.push({identifiers:i.slice(75*s,75*(s+1)).map((function(t){return t.collectors&&t.set&&!Pt.includes(t.set.toUpperCase())?{set:t.set,collector_number:t.collectors.toString()}:t.set&&!Pt.includes(t.set.toUpperCase())?{name:t.name,set:t.set}:{name:t.name}}))});Promise.all(a.map((function(t){return fetch("".concat(r.apiRoot,"cards/collection"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){return t.json()}))}))).then((function(t){var e=t.filter((function(t){return"bad_request"===t.code}));if(e.length>0)return e.forEach((function(t){return console.error(t.details)})),r.dispatch(Ur(!0)),void r.emitEvent("fetchError");var i=t.map((function(t){return t.data})).flat();t.map((function(t){return t.not_found})).flat().forEach((function(t){return console.error("Did not find results for: ",t)})),r.dispatch(Ir(i,n)),r.dispatch(Ur(!0)),r.emitEvent("fetchList")}))}}},{key:"displayPreview",value:function(t){var e=this;this.hidePreview||this.dispatch(Xr(t),(function(){return e.emitEvent("previewChange")}))}},{key:"handleMouseEnter",value:function(t,e){_e(t)?t.preventDefault():this.displayPreview(e)}},{key:"handleMobileTouch",value:function(t,e){var r;_e(t)&&(this.emitEvent("touchCard"),(null===(r=this.state.preview)||void 0===r?void 0:r.name)===e.name||this.hidePreview||(t.preventDefault(),this.displayPreview(e)))}},{key:"onTabFocusIn",value:function(t,e){_e(t)||"Tab"!==t.code||this.displayPreview(e)}},{key:"exportDeck",value:function(t){var e=this,r=function(t){return"".concat(t.amount," ").concat(t.name,"\n")},n="";if(t===Ct&&(this.state.parsedList.commander?n+="Commander\n".concat(r(this.state.parsedList.commander),"\n"):this.state.parsedList.companion&&(n+="Companion\n".concat(r(this.state.parsedList.companion),"\n")),n+="Deck\n"),this.state.parsedList.deck.forEach((function(t){return n+=r(t)})),this.state.parsedList.sideboard.length>0&&(t===Ct&&(n+="\nSideboard"),n+="\n",this.state.parsedList.sideboard.forEach((function(t){return n+=r(t)}))),t===kt&&this.state.parsedList.commander&&(n+="\n".concat(r(this.state.parsedList.commander))),t===kt){var i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),i.setAttribute("download",this.heading?"".concat(this.heading,".txt"):"deck.txt"),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}else navigator.clipboard.writeText(n.trim()).then((function(){e.dispatch(Yr("Copied to clipboard"),(function(){return setTimeout((function(){return e.dispatch(Yr(void 0))}),3e3)}))}));this.emitEvent("deckExported")}},{key:"renderDeckSection",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?F(or||(or=_r([' <dl part="section" class="','"> <dt part="section-title">'," (",")</dt> "," </dl> "])),null!=r?r:"",t.title,t.cards.reduce((function(t,e){return t+e.amount}),0),t.cards.map((function(t){return F(ar||(ar=_r([' <dd part="section-item"> ','x <a href="','" target="_blank" rel="nofollow noreferrer noopener" part="link" @mouseenter="','" @click="','" @keyup="','"> '," </a> </dd> "])),t.amount,t.url,(function(r){return e.handleMouseEnter(r,t)}),(function(r){return e.handleMobileTouch(r,t)}),(function(r){return e.onTabFocusIn(r,t)}),t.name)}))):null}},{key:"render",value:function(){var t,e=this;return this.state.fetched?F(cr||(cr=_r([' <div part="container"> ',' <div part="body"> '," "," "," "," "," "," </div> </div> "])),this.heading||!this.hideExport?F(lr||(lr=_r([' <div part="header"> '," "," </div> "])),this.heading?F(ur||(ur=_r(['<h2 part="heading">',"</h2>"])),this.heading):null,this.hideExport?null:F(pr||(pr=_r([" ",' <button type="button" part="export" class="button" @click="','"> Arena </button> <button type="button" part="export" class="button" @click="','"> MTGO </button> '])),this.state.exportNotification?F(fr||(fr=_r([' <p part="export-notification">',"</p> "])),this.state.exportNotification):null,(function(){return e.exportDeck(Ct)}),(function(){return e.exportDeck(kt)}))):null,this.hidePreview?null:F(dr||(dr=_r([' <div part="preview-container"> <div part="preview" class="','"> '," </div> "," </div> "])),dt({flipped:this.state.flipPreview}),this.state.preview?this.state.preview.faces.map((function(t){return F(hr||(hr=_r([' <img part="preview-image" src="','" alt="','"> '])),t.image,t.name)})):null,(null===(t=this.state.preview)||void 0===t?void 0:t.faces.length)>1?F(mr||(mr=_r([' <button type="button" part="flip-preview" class="button button--small" @click="','"> Flip </button> '])),(function(){return e.dispatch(Jr())})):null),this.renderDeckSection(this.state.decklist.commander),this.renderDeckSection(this.state.decklist.companion),xt.map((function(t){return e.renderDeckSection(e.state.decklist[t.toLowerCase()])})),this.state.decklist.sideboard&&!this.inlineSideboard?F(yr||(yr=_r(['<hr part="separator">']))):null,this.renderDeckSection(this.state.decklist.sideboard,this.inlineSideboard?null:"section--sideboard")):F(sr||(sr=_r([' <seer-loader part="loader"></seer-loader> '])))}}])&&Pr(e.prototype,r),n&&Pr(e,n),s}(Dt);customElements.define("seer-loader",ut),customElements.define("card-link",He),customElements.define("card-inline",tr),customElements.define("deck-list",Kr)})()})()}}]);